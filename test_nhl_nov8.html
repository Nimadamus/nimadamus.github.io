<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow"/>
  <meta property="og:title" content="Test Nhl Nov8 | BetLegend Picks">
  <meta property="og:description" content="Expert sports betting picks and analysis with verified track records. Free daily picks for NFL, NBA, NHL, MLB and college sports.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://betlegendpicks.com/test_nhl_nov8.html">
  <meta property="og:site_name" content="BetLegend Picks">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Test Nhl Nov8 | BetLegend Picks">
  <meta name="twitter:description" content="Expert sports betting picks and analysis with verified track records. Free daily picks for NFL, NBA, NHL, MLB and college sports.">
    <title>NHL Nov 8 Duplicate Test</title>
  <meta name="description" content="Expert sports betting picks and analysis with verified track records. Free daily picks for NFL, NBA, NHL, MLB and college sports.">
  <link rel="canonical" href="https://betlegendpicks.com/test_nhl_nov8.html">
    <style>
        body { font-family: monospace; padding: 20px; background: #000; color: #0f0; }
        .duplicate { color: #f00; font-weight: bold; }
        .unique { color: #0f0; }
        h1 { color: #0ff; }
    </style>
</head>
<body>
    <h1>NHL November 8, 2025 - Duplicate Test</h1>
    <div id="status">Loading...</div>
    <div id="results"></div>

    <script>
        const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRaRwsGOmbXrqAX0xqrDc9XwRCSaAOkuW68TArz3XQp7SMmLirKbdYqU5-zSM_A-MDNKG6sbdwZac6I/pub?output=csv';

        async function testDuplicates() {
            try {
                // Force no cache
                const response = await fetch(CSV_URL + '?nocache=' + Date.now(), {
                    cache: 'no-store',
                    headers: { 'Cache-Control': 'no-cache, no-store, must-revalidate' }
                });

                const csv = await response.text();
                const lines = csv.split('\n');

                document.getElementById('status').innerHTML = `
                    <p>CSV loaded: ${lines.length} total lines</p>
                    <p>Timestamp: ${new Date().toLocaleString()}</p>
                `;

                // Find Nov 8 picks
                const nov8Picks = {};
                const nov8Lines = [];

                lines.forEach((line, idx) => {
                    if (line.includes('11-8-2025') || line.includes('11-08-2025')) {
                        const parts = line.split(',');
                        if (parts.length > 1) {
                            const date = parts[0].trim();
                            const pick = parts[1].trim().toLowerCase();

                            nov8Lines.push({
                                lineNum: idx + 1,
                                date: date,
                                pick: parts[1].trim(),
                                line: line
                            });

                            if (!nov8Picks[pick]) {
                                nov8Picks[pick] = [];
                            }
                            nov8Picks[pick].push(idx + 1);
                        }
                    }
                });

                let html = '<h2>November 8, 2025 Picks:</h2>';
                html += `<p>Total: ${nov8Lines.length} picks found</p>`;

                let duplicateCount = 0;

                for (const [pick, lineNums] of Object.entries(nov8Picks)) {
                    const isDupe = lineNums.length > 1;
                    if (isDupe) duplicateCount++;

                    const className = isDupe ? 'duplicate' : 'unique';
                    html += `<div class="${className}">`;
                    html += `<strong>${isDupe ? '[DUPLICATE]' : '[OK]'}</strong> ${pick}<br>`;
                    html += `Lines: ${lineNums.join(', ')}<br>`;

                    // Show the actual lines
                    lineNums.forEach(ln => {
                        const matchingLine = nov8Lines.find(l => l.lineNum === ln);
                        if (matchingLine) {
                            html += `  ${matchingLine.lineNum}: ${matchingLine.date} - ${matchingLine.line.substring(0, 80)}<br>`;
                        }
                    });

                    html += `</div><br>`;
                }

                html += `<h2>Result:</h2>`;
                if (duplicateCount === 0) {
                    html += `<p class="unique">✓ NO DUPLICATES FOUND!</p>`;
                    html += `<p>The CSV has been cleaned. Clear your browser cache and refresh the main page.</p>`;
                } else {
                    html += `<p class="duplicate">✗ ${duplicateCount} DUPLICATES STILL EXIST</p>`;
                }

                document.getElementById('results').innerHTML = html;

            } catch (error) {
                document.getElementById('status').innerHTML = `<p class="duplicate">Error: ${error}</p>`;
            }
        }

        testDuplicates();
    </script>

<!-- Clicky Analytics -->
<a title="Web Analytics" href="https://clicky.com/101485054"><img alt="Clicky" src="//static.getclicky.com/media/links/badge.gif" border="0" /></a>
<script async data-id="101485054" src="//static.getclicky.com/js"></script>
</body>
</html>
