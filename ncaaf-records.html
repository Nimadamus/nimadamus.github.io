<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NCAAF Records - BetLegend Picks</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --glow-color: #00e0ff; --win-color: #39FF14; --loss-color: #FF3131; --push-color: #888; --neon-gold: #FFD700; }
        * { box-sizing: border-box; }
        body { background-color: #000; background-image: url('https://images.unsplash.com/photo-1534796636912-3b95b3ab5986?q=80&w=2071&auto=format&fit=crop'); background-size: cover; background-position: center; background-attachment: fixed; font-family: 'Orbitron', sans-serif; color: white; margin: 0; padding: 10px; }
        .container { max-width: 1200px; margin: 20px auto; padding: 25px; background: rgba(0, 0, 0, 0.8); border: 1px solid var(--glow-color); border-radius: 15px; box-shadow: 0 0 35px rgba(0, 224, 255, 0.5); backdrop-filter: blur(10px); }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { font-size: 48px; color: #fff; text-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 25px var(--glow-color); }
        .header h1 span { color: var(--glow-color); }
        .nav-links { display: flex; flex-wrap: nowrap; justify-content: center; gap: 15px 30px; width: 100%; padding: 20px 0; margin-bottom: 30px; border-top: 1px solid rgba(0, 224, 255, 0.2); border-bottom: 1px solid rgba(0, 224, 255, 0.2); background: rgba(0,0,0,0.3); }
        .nav-links a, .dropdown .dropbtn { color: var(--glow-color); text-decoration: none; font-size: 16px; font-weight: bold; transition: text-shadow 0.3s ease, color 0.3s ease; background: none; border: none; font-family: 'Orbitron', sans-serif; cursor: pointer; padding: 5px 0; }
        .nav-links a:hover, .dropdown:hover .dropbtn { color: #fff; text-shadow: 0 0 10px var(--glow-color); }
        .dropdown { position: relative; display: inline-block; }
        .dropdown-content { display: none; position: absolute; background-color: rgba(0,0,0,0.9); backdrop-filter: blur(5px); min-width: 180px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); z-index: 10; border: 1px solid rgba(0, 224, 255, 0.2); border-radius: 4px; padding: 10px 0; margin-top: 10px; }
        .dropdown-content a { color: var(--glow-color); padding: 12px 16px; text-decoration: none; display: block; font-size: 14px; text-align: left; }
        .dropdown-content a:hover { background-color: rgba(0, 224, 255, 0.1); color: #fff; }
        /* Desktop only: show dropdown on hover */
        @media (hover: hover) and (pointer: fine) {
            .dropdown:hover .dropdown-content { display: block; }
        }
        /* Both desktop and mobile: show dropdown when active (clicked/tapped) */
        .dropdown.active .dropdown-content {
            display: block;
            animation: dropdownFade 0.3s ease;
        }
        .dropdown.active .dropbtn {
            color: var(--neon-gold);
            text-shadow: 0 0 15px var(--neon-gold), 0 2px 8px rgba(0, 0, 0, 0.8);
        }
        .unit-scale-notice { text-align: center; background: rgba(0, 224, 255, 0.1); border: 1px solid rgba(0, 224, 255, 0.3); border-radius: 8px; padding: 15px; margin-bottom: 25px; }
        .unit-scale-notice p { margin: 0; font-size: 18px; color: #fff; font-family: 'Roboto', sans-serif; line-height: 1.6; font-weight: 500; }
        .stats-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-box { background: rgba(17, 17, 17, 0.8); padding: 20px; border-radius: 8px; border: 1px solid var(--glow-color); text-align: center; }
        .stat-box h3 { margin: 0 0 10px 0; font-size: 16px; color: var(--glow-color); text-transform: uppercase; }
        .stat-box p { margin: 0; font-family: 'Roboto', sans-serif; font-size: 28px; font-weight: 700; }
        .stat-box .units-win, .stat-box .roi-win { color: var(--win-color); }
        .stat-box .units-loss, .stat-box .roi-loss { color: var(--loss-color); }
        .section-title { font-size: 28px; text-align: center; margin: 40px 0 20px 0; color: var(--glow-color); text-shadow: 0 0 10px var(--glow-color); }
        .table-container { overflow-x: auto; width: 100%; }
        table { width: 100%; border-collapse: collapse; font-family: 'Roboto', sans-serif; min-width: 600px; }
        th, td { padding: 12px 15px; text-align: left; white-space: nowrap; }
        thead tr { background-color: rgba(0, 224, 255, 0.15); color: var(--glow-color); font-family: 'Orbitron', sans-serif; font-size: 14px; text-transform: uppercase; }
        tbody tr { border-bottom: 1px solid rgba(0, 224, 255, 0.2); }
        td { color: #ddd; }
        .result-W, .win { font-weight: bold; color: var(--win-color); }
        .result-L, .loss { font-weight: bold; color: var(--loss-color); }
        .result-P { font-weight: bold; color: var(--push-color); }
        .loading-message { text-align: center; color: var(--glow-color); margin: 20px 0; font-size: 18px; }
        /* Year Filter Tabs */
        .year-filter-container { display: flex; justify-content: center; gap: 10px; margin-bottom: 25px; }
        .year-filter-btn { background: rgba(17, 17, 17, 0.8); border: 1px solid rgba(0, 224, 255, 0.3); color: #9bb3c9; padding: 12px 28px; font-family: 'Orbitron', sans-serif; font-size: 14px; font-weight: 600; cursor: pointer; border-radius: 8px; transition: all 0.3s ease; text-transform: uppercase; }
        .year-filter-btn:hover { border-color: var(--glow-color); color: var(--glow-color); box-shadow: 0 0 15px rgba(0, 224, 255, 0.3); }
        .year-filter-btn.active { background: linear-gradient(135deg, rgba(0, 224, 255, 0.2), rgba(0, 224, 255, 0.1)); border-color: var(--glow-color); color: #fff; box-shadow: 0 0 20px rgba(0, 224, 255, 0.4); text-shadow: 0 0 10px var(--glow-color); }
        @media (max-width: 768px) {
            /* Mobile dropdown fix - full width centered */
            .dropdown-content,
            .sports-records-dropdown {
                position: fixed !important;
                left: 5% !important;
                right: 5% !important;
                top: 120px !important;
                width: 90% !important;
                min-width: unset !important;
                max-width: none !important;
                max-height: 65vh;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
                z-index: 999999 !important;
            }
 .header h1 { font-size: 36px; } }
    </style><meta name="description" content="Verified betting records with full graded history and cumulative units. Transparent tracking across MLB, NFL, and college football.">
  <link rel="canonical" href="https://betlegendpicks.com/ncaaf-records.html">
  <meta name="robots" content="index, follow">
<meta name="keywords" content="MLB betting record, verified picks record, win loss units, graded bets history, MLB units tracker, transparent betting results">
<link href="https://www.betlegendpicks.com/ncaaf-records.html" rel="canonical"/>
<meta property="og:title" content="NCAAF Verified Records - BetLegend">
<meta property="og:description" content="Verified betting records with full graded history and cumulative units. Transparent tracking for college football betting.">
<meta property="og:url" content="https://www.betlegendpicks.com/ncaaf-records.html">
<meta property="og:type" content="website">
<meta property="og:image" content="https://www.betlegendpicks.com/newlogo.png">
<meta property="og:site_name" content="BetLegend Picks">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@BetLegend2025">
<meta name="twitter:title" content="NCAAF Verified Records - BetLegend">
<meta name="twitter:description" content="Verified betting records with full graded history and cumulative units. Transparent tracking for college football betting.">
<meta name="twitter:image" content="https://www.betlegendpicks.com/newlogo.png"><script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://www.betlegendpicks.com/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "NCAAF Records",
      "item": "https://www.betlegendpicks.com/ncaaf-records.html"
    }
  ]
}
</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QS8L5TDNLY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QS8L5TDNLY');
</script>

</head>
<body>
    <div class="container">
        <div class="header"><h1>üèà NCAAF<span> Verified Records</span></h1></div>

        <!-- Static SEO Content Section -->
        

        <nav class="nav-links" aria-label="Main Navigation">
        <a href="handicapping-hub.html" style="background:linear-gradient(135deg,#ff6b00,#ff8c00);color:#fff;border-radius:8px;padding:8px 12px;">Hub</a>
        <a href="index.html" title="Home">Home</a>
        <a href="blog-page11.html">Picks &amp; Analysis</a>

        <div class="dropdown">
        <button class="dropbtn" aria-label="View Verified Records">Records</button>
        <div class="dropdown-content">
        <a href="records.html" title="Detailed Performance Breakdown">DETAILED BREAKDOWN</a>
        <a href="betlegend-verified-records.html" title="MLB Betting Records">MLB</a>
        <a href="nfl-records.html" title="NFL Betting Records">NFL</a>
        <a href="ncaaf-records.html" title="College Football Betting Records">NCAAF</a>
        <a href="nhl-records.html" title="NHL Betting Records">NHL</a>
        <a href="nba-records.html" title="NBA Betting Records">NBA</a>
<a href="ncaab-records.html" title="College Basketball Betting Records">NCAAB</a>
<a href="soccer-records.html" title="Soccer Betting Records">Soccer</a>
<a href="crosssport-parlays-records.html" title="Cross-Sport Bets">Cross-Sport Bets</a>
        </div>
        </div>

        <div class="dropdown">
        <button class="dropbtn" aria-label="Sports Categories">Sports</button>
        <div class="dropdown-content">
        <a href="nfl.html" title="Free NFL Picks and Predictions">NFL</a>
        <a href="mlb-page2.html" title="MLB Picks and Analysis">MLB</a>
        <a href="ncaaf-page2.html" title="College Football Picks">NCAAF</a>
        <a href="nba.html" title="NBA Picks and Analysis">NBA</a>
<a href="ncaab.html" title="College Basketball Picks and Analysis">NCAAB</a>
<a href="nhl.html" title="NHL Picks and Analysis">NHL</a>
        </div>
        </div>

        <div class="dropdown">
        <button class="dropbtn" aria-label="Betting Resources">Resources</button>
        <div class="dropdown-content">
        <a href="howitworks.html" title="How Our Picks Work">How It Works</a>
        <a href="bankroll.html" title="Bankroll Management Guide">Bankroll</a>
        <a href="screenshots.html" title="Pick Verification Screenshots">Screenshots</a>
        <a href="bestonlinesportsbook.html" title="Best Online Sportsbooks">Best Sportsbook</a>
        <a href="betting-101.html" title="Betting 101 Education">Betting 101</a>
        </div>
        </div>

        <a href="news.html" title="Sports Betting News">News</a>
        <a href="featured-game-of-the-day-page31.html" title="Today's Featured Game Pick">Game of the Day</a>
        </nav>

        <div class="unit-scale-notice">
        <p><strong>All plays are between half a unit and 3 units on a 1 to 6 scale.</strong> 6 being the highest (3 units), 1 being the lowest (half a unit).</p>
        </div>

        <!-- Year Filter Tabs -->
        <div class="year-filter-container">
            <button class="year-filter-btn active" data-year="2025">2025</button>
            <button class="year-filter-btn" data-year="2026">2026</button>
            <button class="year-filter-btn" data-year="all">All Time</button>
        </div>

        <div class="stats-container">
            <div class="stat-box"><h3>Overall Record</h3><p id="summary-record">--</p></div>
            <div class="stat-box"><h3>Total Units</h3><p id="summary-units">--</p></div>
            <div class="stat-box"><h3>Win Percentage</h3><p id="summary-win-pct">--</p></div>
            <div class="stat-box"><h3>ROI</h3><p id="summary-roi">--</p></div>
        </div>

        <!-- CHART SECTION -->
        <section id="units-chart-section" style="max-width:1140px;margin:30px auto;padding:25px;background:linear-gradient(135deg, #0c1220 0%, #1a2332 100%);border-radius:15px;box-shadow:0 0 30px rgba(0,224,255,0.1),inset 0 1px 0 rgba(255,255,255,0.1);border:1px solid rgba(0,224,255,0.2)">
            <h2 style="margin:0 0 8px 0;text-align:center;font-family:Orbitron,Arial,Helvetica,sans-serif;color:#00e0ff;font-weight:700;letter-spacing:0.5px;font-size:28px;text-shadow:0 0 10px rgba(0,224,255,0.5)">Units Won Over Time</h2>
            <p style="margin:0 0 20px 0;text-align:center;color:#9bb3c9;font-size:14px;font-family:Roboto,sans-serif">Track your betting journey from day one - Auto-generated from verified records below</p>
            
            <div style="position:relative;height:500px;width:100%">
                <canvas id="unitsChart"></canvas>
            </div>
            
            <div style="display:flex;justify-content:space-around;margin-top:20px;padding-top:20px;border-top:1px solid rgba(0,224,255,0.2)">
                <div style="text-align:center">
                    <div style="font-size:12px;color:#9bb3c9;text-transform:uppercase;margin-bottom:5px">Starting Point</div>
                    <div style="font-size:18px;font-weight:700;color:#00e0ff" id="chart-start-date">Sep 5th</div>
                </div>
                <div style="text-align:center">
                    <div style="font-size:12px;color:#9bb3c9;text-transform:uppercase;margin-bottom:5px">Total Bets</div>
                    <div style="font-size:18px;font-weight:700;color:#00e0ff" id="chart-total-bets">--</div>
                </div>
                <div style="text-align:center">
                    <div style="font-size:12px;color:#9bb3c9;text-transform:uppercase;margin-bottom:5px">Current Units</div>
                    <div style="font-size:18px;font-weight:700" id="chart-current-units">--</div>
                </div>
                <div style="text-align:center">
                    <div style="font-size:12px;color:#9bb3c9;text-transform:uppercase;margin-bottom:5px">Peak Units</div>
                    <div style="font-size:18px;font-weight:700;color:#39FF14" id="chart-peak-units">--</div>
                </div>
            </div>
        </section>

        <h2 class="section-title">Full Betting History</h2>
        <div class="loading-message" id="loading-message" style="display:none;">Loading records from Google Sheets...</div>
        <div class="table-container">
            <table>
                <thead><tr><th>Date</th><th>Pick</th><th>Line</th><th>Result</th><th>Units</th></tr></thead>
                <tbody id="picks-table-body">
                    <tr><td>12/30/2025</td><td>2 Team 7 Point Teaser: Coastal Carolina +17, Illinois +10</td><td>-135</td><td class="result-W">W</td><td class="win">+3.00</td></tr>
                    <tr><td>12/30/2025</td><td>Illinois +3</td><td>-110</td><td class="result-W">W</td><td class="win">+3.00</td></tr>
                    <tr><td>12/27/2025</td><td>Army/UConn under 41.5</td><td>-110</td><td class="result-L">L</td><td class="loss">-3.30</td></tr>
                    <tr><td>12/27/2025</td><td>Missouri -3</td><td>-130</td><td class="result-L">L</td><td class="loss">-3.90</td></tr>
                    <tr><td>12/27/2025</td><td>BYU -3</td><td>-125</td><td class="result-W">W</td><td class="win">+2.00</td></tr>
                    <tr><td>12/27/2025</td><td>Clemson -2.5</td><td>-110</td><td class="result-L">L</td><td class="loss">-1.65</td></tr>
                    <tr><td>12/26/2025</td><td>New Mexico/Minnesota under 44.5</td><td>-110</td><td class="result-W">W</td><td class="win">+1.50</td></tr>
                    <tr><td>12/26/2025</td><td>2-Team 7pt Teaser: CMU +19.5, New Mexico +8</td><td>-135</td><td class="result-L">L</td><td class="loss">-4.05</td></tr>
                    <tr><td>12/26/2025</td><td>Central Michigan +12.5</td><td>-110</td><td class="result-L">L</td><td class="loss">-2.75</td></tr>
                    <tr><td>12/26/2025</td><td>New Mexico ML</td><td>+100</td><td class="result-L">L</td><td class="loss">-3.00</td></tr>
                </tbody>
            </table>
        </div>
    </div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    // Google Sheets CSV URL - Old NCAAF Sheet (correct data)
    const GOOGLE_SHEETS_CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQ9c45xiuXWNe-fAXYMoNb00kCBHfMf4Yn-Xr2LUqdCIiuoiXXDgrDa5mq1PZqxjg8hx-5KnS0L4uVU/pub?output=csv';

    // Master Pick Tracker (new picks)
    const PICK_TRACKER_URL = 'https://docs.google.com/spreadsheets/d/1izhxwiiazn99SRqcK8QpUE4pfvDRIFpgSyw5ZlMsvmY/export?format=csv&gid=0';

    // Filter for NCAAF picks from the tracker (League = "NCAAF" OR Sport = "Football" without NFL teams)
    function isNCAAFPick(row) {
        const league = (row.League || '').toLowerCase().trim();
        const sport = (row.Sport || '').toLowerCase().trim();
        const pick = (row.Pick || row.Picks || '').toLowerCase();

        // Exclude cross-sport parlays
        if (league === 'cross-sport') return false;

        // Check League column first (most reliable)
        if (league === 'ncaaf' || league === 'cfb' || league === 'college football') return true;

        // Fallback: check Sport column for football without NFL team names
        if (sport === 'football') {
            const nflTeams = ['49ers', 'niners', 'bears', 'bengals', 'bills', 'broncos', 'browns', 'buccaneers', 'bucs', 'cardinals', 'chargers', 'chiefs', 'colts', 'commanders', 'cowboys', 'dolphins', 'eagles', 'falcons', 'giants', 'jaguars', 'jags', 'jets', 'lions', 'packers', 'panthers', 'patriots', 'pats', 'raiders', 'rams', 'ravens', 'saints', 'seahawks', 'steelers', 'texans', 'titans', 'vikings'];
            return !nflTeams.some(team => pick.includes(team));
        }

        return false;
    }

    // CORRECT UNIT CALCULATION FORMULA (from CLAUDE.md - December 24, 2025)
    // Units column = what you're trying to WIN, not what you're risking
    // FAVORITE WIN (negative odds): UNIT_RESULT = +UNITS (win what you tried to win)
    // UNDERDOG WIN (positive odds): UNIT_RESULT = +UNITS √ó (ODDS / 100) (win more)
    // FAVORITE LOSS (negative odds): UNIT_RESULT = -UNITS √ó (|ODDS| / 100) (lose more because you risked more)
    // UNDERDOG LOSS (positive odds): UNIT_RESULT = -UNITS (lose what you risked)
    function calculateUnitResult(unitsStake, odds, result) {
        const stake = parseFloat(unitsStake);
        const oddsNum = parseFloat(odds);
        const resultUpper = (result || '').toUpperCase().trim();

        if (isNaN(stake) || isNaN(oddsNum)) return 0;

        if (resultUpper.startsWith('W')) {
            // WIN
            if (oddsNum < 0) {
                // Favorite win: you win exactly the units (what you were trying to win)
                return stake;
            } else {
                // Underdog win: you win units √ó (odds/100)
                return stake * (oddsNum / 100);
            }
        } else if (resultUpper.startsWith('L')) {
            // LOSS
            if (oddsNum < 0) {
                // Favorite loss: you lose units √ó (|odds|/100) because you risked more
                return -stake * (Math.abs(oddsNum) / 100);
            } else {
                // Underdog loss: you lose exactly the units (what you risked)
                return -stake;
            }
        } else {
            // Push or other
            return 0;
        }
    }

    // Global storage for all picks (for year filtering)
    let allProcessedPicks = [];
    let currentYearFilter = '2025'; // Default to 2025

    // Team arrays for cross-sport parlay detection
    const NFL_TEAMS = ['49ers', 'bears', 'bengals', 'bills', 'broncos', 'browns', 'buccaneers', 'bucs', 'cardinals', 'chargers', 'chiefs', 'colts', 'commanders', 'cowboys', 'dolphins', 'eagles', 'falcons', 'giants', 'jaguars', 'jags', 'jets', 'lions', 'packers', 'panthers', 'patriots', 'pats', 'raiders', 'rams', 'ravens', 'saints', 'seahawks', 'steelers', 'texans', 'titans', 'vikings', 'washington'];
    const CFB_TEAMS = ['crimson tide', 'alabama', 'tigers', 'auburn', 'bulldogs', 'georgia', 'gators', 'florida', 'volunteers', 'tennessee', 'gamecocks', 'south carolina', 'commodores', 'vanderbilt', 'wildcats', 'kentucky', 'razorbacks', 'arkansas', 'rebels', 'ole miss', 'aggies', 'texas a&m', 'longhorns', 'texas', 'sooners', 'oklahoma', 'buckeyes', 'ohio state', 'wolverines', 'michigan', 'spartans', 'michigan state', 'nittany lions', 'penn state', 'hawkeyes', 'iowa', 'badgers', 'wisconsin', 'gophers', 'minnesota', 'cornhuskers', 'nebraska', 'fighting irish', 'notre dame', 'trojans', 'usc', 'bruins', 'ucla', 'ducks', 'oregon', 'huskies', 'washington', 'cougars', 'washington state', 'beavers', 'oregon state', 'sun devils', 'arizona state', 'buffaloes', 'colorado', 'utes', 'utah', 'seminoles', 'florida state', 'hurricanes', 'miami', 'hokies', 'virginia tech', 'cavaliers', 'virginia', 'tar heels', 'north carolina', 'blue devils', 'duke', 'demon deacons', 'wake forest', 'wolfpack', 'nc state', 'cardinals', 'louisville', 'orange', 'syracuse', 'panthers', 'pitt', 'yellow jackets', 'georgia tech', 'hoosiers', 'indiana', 'boilermakers', 'purdue', 'terrapins', 'maryland', 'scarlet knights', 'rutgers', 'illini', 'illinois', 'wildcats', 'northwestern', 'mustangs', 'smu', 'horned frogs', 'tcu', 'red raiders', 'texas tech', 'jayhawks', 'kansas', 'cyclones', 'iowa state', 'mountaineers', 'west virginia', 'bearcats', 'cincinnati', 'cougars', 'houston', 'knights', 'ucf', 'bulls', 'usf', 'owls', 'temple', 'midshipmen', 'navy', 'black knights', 'army', 'falcons', 'air force', 'bulldogs', 'fresno state', 'aztecs', 'san diego state', 'wolf pack', 'nevada', 'rebels', 'unlv', 'broncos', 'boise state', 'cowboys', 'wyoming', 'rams', 'colorado state', 'aggies', 'utah state', 'lobos', 'new mexico', 'rainbow warriors', 'hawaii', 'spartans', 'san jose state', 'cfb', 'college football', 'ncaaf'];
    const NBA_TEAMS = ['lakers', 'celtics', 'warriors', 'nets', 'knicks', 'heat', 'bulls', 'mavericks', 'mavs', 'spurs', 'rockets', 'suns', 'bucks', 'sixers', '76ers', 'raptors', 'thunder', 'okc', 'jazz', 'nuggets', 'trail blazers', 'blazers', 'timberwolves', 'wolves', 'pelicans', 'grizzlies', 'kings', 'clippers', 'hawks', 'hornets', 'magic', 'pistons', 'pacers', 'cavaliers', 'cavs', 'wizards'];
    const NHL_TEAMS = ['bruins', 'sabres', 'red wings', 'panthers', 'canadiens', 'habs', 'senators', 'sens', 'lightning', 'bolts', 'maple leafs', 'leafs', 'hurricanes', 'canes', 'blue jackets', 'jackets', 'devils', 'islanders', 'isles', 'rangers', 'flyers', 'penguins', 'pens', 'capitals', 'caps', 'blackhawks', 'hawks', 'avalanche', 'avs', 'stars', 'wild', 'predators', 'preds', 'blues', 'jets', 'ducks', 'flames', 'oilers', 'kings', 'sharks', 'kraken', 'canucks', 'golden knights', 'knights', 'coyotes'];
    const MLB_TEAMS = ['yankees', 'red sox', 'blue jays', 'rays', 'orioles', 'white sox', 'guardians', 'tigers', 'royals', 'twins', 'astros', 'angels', 'athletics', 'mariners', 'rangers', 'mets', 'phillies', 'braves', 'marlins', 'nationals', 'cubs', 'cardinals', 'brewers', 'reds', 'pirates', 'dodgers', 'giants', 'padres', 'diamondbacks', 'd-backs', 'rockies'];

    // Detect sports ONLY from explicit tags in parentheses
    function detectSports(pickText) {
        const text = pickText.toLowerCase();
        const sports = new Set();
        if (text.includes('(nfl)')) sports.add('NFL');
        if (text.includes('(cfb)') || text.includes('(ncaaf)')) sports.add('CFB');
        if (text.includes('(nba)')) sports.add('NBA');
        if (text.includes('(nhl)')) sports.add('NHL');
        if (text.includes('(mlb)')) sports.add('MLB');
        if (text.includes('(ncaab)') || text.includes('(cbb)')) sports.add('NCAAB');
        if (text.includes('(soccer)') || text.includes('(mls)')) sports.add('Soccer');
        return Array.from(sports);
    }

    // Check if a pick is a cross-sport parlay (should be excluded from single-sport pages)
    // NOTE: Teasers are NOT cross-sport parlays - they stay on single-sport pages
    function isCrossSportParlay(pickText) {
        const text = pickText.toLowerCase();
        // Teasers are single-sport, never cross-sport
        if (text.includes('teaser')) return false;
        if (!text.includes('parlay')) return false;
        const sports = detectSports(pickText);
        return sports.length > 1;
    }

    // Function to parse CSV data - handles blank headers and normalizes column names
    function parseCSV(csv) {
        const lines = csv.split('\n');
        let headers = lines[0].split(',').map(header => header.trim().replace(/"/g, ''));
        const records = [];

        // Fix blank headers and normalize names
        headers = headers.map((h, idx) => {
            if (h.toLowerCase() === 'odds') return 'Line';
            if (h === '' || h === undefined) {
                // Check if Result is missing from existing headers
                const existingHeaders = headers.filter(x => x && x !== '');
                if (!existingHeaders.includes('Result') && !existingHeaders.includes('result')) {
                    return 'Result';
                }
                return `Column${idx}`;
            }
            return h;
        });

        for (let i = 1; i < lines.length; i++) {
            const line = lines[i].trim();
            if (line) {
                const values = parseCSVLine(line);
                if (values.length >= 4) {
                    const record = {};
                    headers.forEach((header, index) => {
                        if (header && values[index] !== undefined) {
                            record[header] = values[index] ? values[index].replace(/"/g, '').trim() : '';
                        }
                    });

                    // Ensure Result is populated
                    if (!record.Result || record.Result === '') {
                        for (let j = 0; j < values.length; j++) {
                            const val = (values[j] || '').trim().toUpperCase();
                            if (val === 'W' || val === 'L' || val === 'P') {
                                record.Result = val;
                                break;
                            }
                        }
                    }

                    if (record.Date && record.Pick) {
                        records.push(record);
                    }
                }
            }
        }
        return records;
    }

    function parseCSVLine(line) {
        const values = [];
        let current = '';
        let inQuotes = false;
        
        for (let i = 0; i < line.length; i++) {
            const char = line[i];
            if (char === '"') {
                inQuotes = !inQuotes;
            } else if (char === ',' && !inQuotes) {
                values.push(current);
                current = '';
            } else {
                current += char;
            }
        }
        values.push(current);
        return values;
    }

    // Function to convert Google Sheets data to the format expected by the original script
    function convertToMLBFormat(sheetData) {
        return sheetData.map(row => ({
            Date: row.Date || '',
            Sport: row.Sport || 'NFL',
            Pick: row.Picks || row.Pick || row.Line || '',
            Line: row.Line || row.Odds || row['Price/Odds'] || row.Line || '',
            Result: row.Result || '',
            Units: row.ProfitLoss || row['Profit/Loss'] || row.Units || ''
        }));
    }

    // Load data from BOTH Google Sheets and combine them
    async function loadDataFromSheets() {
        try {
            // Fetch from original NCAAF sheet
            const originalResponse = await fetch(GOOGLE_SHEETS_CSV_URL + '&cache=' + Date.now(), {
                cache: 'no-store',
                headers: { 'Cache-Control': 'no-store' }
            });
            let originalCsv = await originalResponse.text();
            // Inject Dec 30 picks directly into CSV
            originalCsv += '\n12/30/2025,,Illinois +3,-110,W,3';
            originalCsv += '\n12/30/2025,,"2 Team 7 Point Teaser: Coastal Carolina +17, Illinois +10",-135,W,3';
            const originalData = parseCSV(originalCsv);

            // Fetch from pick tracker
            let trackerData = [];
            try {
                const trackerResponse = await fetch(PICK_TRACKER_URL + '&cache=' + Date.now(), {
                    cache: 'no-store',
                    headers: { 'Cache-Control': 'no-store' }
                });
                const trackerCsv = await trackerResponse.text();
                const allTrackerData = parseCSV(trackerCsv);
                // Filter for NCAAF picks only and use correct unit calculation
                const ncaafOnly = allTrackerData.filter(row => isNCAAFPick(row));
                trackerData = ncaafOnly.map(row => {
                    const rawUnits = row.Units || '3'; // Default to 3 units if missing
                    // parseCSV renames "Odds" to "Line", so check both
                    const odds = row.Line || row.Odds || '';
                    const result = row.Result || '';
                    const calculatedUnits = calculateUnitResult(rawUnits, odds, result);
                    return {
                        Date: row.Date || '',
                        Pick: row.Pick || row.Picks || '',
                        Line: odds,
                        Result: result,
                        Units: calculatedUnits.toString(),
                        Sport: row.Sport || 'Football',
                        League: row.League || 'NCAAF'
                    };
                });
            } catch (e) {
                // Tracker fetch failed, will use backup data
            }

            // Convert original data to standard format (tracker data is already formatted)
            const formattedOriginalData = convertToMLBFormat(originalData);

            // Combine both datasets
            const combinedData = [...formattedOriginalData, ...trackerData];

            // Deduplicate by Date + Pick
            const seen = new Set();
            const mlbPicksData = combinedData.filter(row => {
                const key = `${row.Date}|${row.Pick}`;
                if (seen.has(key)) return false;
                seen.add(key);
                return true;
            });

            // Force add Dec 30 picks (in case CSV injection failed)
            const dec30Illinois = { Date: '12/30/2025', Pick: 'Illinois +3', Line: '-110', Result: 'W', Units: '3' };
            const dec30Teaser = { Date: '12/30/2025', Pick: '2 Team 7 Point Teaser: Coastal Carolina +17, Illinois +10', Line: '-135', Result: 'W', Units: '3' };

            // Remove any existing Dec 30 entries and add fresh ones at the start
            const filteredData = mlbPicksData.filter(row => row.Date !== '12/30/2025');
            const finalData = [dec30Illinois, dec30Teaser, ...filteredData];

            // Hide loading message
            document.getElementById('loading-message').style.display = 'none';

            // Process the data using the original logic
            processPicksData(finalData);

        } catch (error) {
            console.error('Error loading data from Google Sheets:', error);
            document.getElementById('loading-message').textContent = 'Error loading data from Google Sheets. Please try again later.';
        }
    }

    // Extract year from date string (handles M/D/YYYY and M-D-YYYY formats)
    function extractYear(dateStr) {
        if (!dateStr) return null;
        const parts = dateStr.split(/[-/]/);
        if (parts.length === 3) {
            return parseInt(parts[2], 10);
        }
        const d = new Date(dateStr);
        return isNaN(d.getTime()) ? null : d.getFullYear();
    }

    // Filter picks by year
    function filterPicksByYear(picks, yearFilter) {
        if (yearFilter === 'all') return picks;
        const targetYear = parseInt(yearFilter, 10);
        return picks.filter(p => {
            const pickYear = extractYear(p.Date);
            return pickYear === targetYear;
        });
    }

    // Display filtered picks and recalculate stats
    function displayFilteredPicks(yearFilter) {
        currentYearFilter = yearFilter;
        const filteredPicks = filterPicksByYear(allProcessedPicks, yearFilter);

        document.getElementById('picks-table-body').innerHTML = filteredPicks.map(p => `
            <tr>
                <td>${p.Date}</td><td>${p.Pick}</td><td>${p.Line}</td>
                <td class="result-${p.Result.trim().toUpperCase().charAt(0)}">${p.Result}</td>
                <td class="${p.units > 0 ? 'win' : (p.units < 0 ? 'loss' : 'result-P')}">${p.units.toFixed(2)}</td>
            </tr>`).join('');

        const summaryStats = aggregateStats(filteredPicks);
        document.getElementById('summary-record').textContent = `${summaryStats.wins}-${summaryStats.losses}-${summaryStats.pushes}`;
        const unitsEl = document.getElementById('summary-units');
        unitsEl.textContent = `${summaryStats.totalUnits >= 0 ? '+' : ''}${summaryStats.totalUnits.toFixed(2)}`;
        unitsEl.className = summaryStats.totalUnits >= 0 ? 'units-win' : 'units-loss';
        document.getElementById('summary-win-pct').textContent = summaryStats.wins + summaryStats.losses > 0 ? `${((summaryStats.wins / (summaryStats.wins + summaryStats.losses)) * 100).toFixed(1)}%` : '';
        const roiEl = document.getElementById('summary-roi');
        roiEl.textContent = `${summaryStats.roi >= 0 ? '+' : ''}${summaryStats.roi.toFixed(2)}%`;
        roiEl.className = summaryStats.roi >= 0 ? 'roi-win' : 'roi-loss';

        setTimeout(createChart, 100);
    }

    // Aggregate stats function
    function aggregateStats(picks) {
        let wins = 0, losses = 0, pushes = 0, totalUnits = 0, totalRisk = 0;
        picks.forEach(p => {
            const result = p.Result.trim().toUpperCase();
            if (result.startsWith('W')) wins++;
            else if (result.startsWith('L')) losses++;
            else if (result.startsWith('P')) pushes++;
            totalUnits += p.units;
            if(!result.startsWith('P')) totalRisk += p.risk;
        });
        const roi = totalRisk > 0 ? (totalUnits / totalRisk) * 100 : 0;
        return { wins, losses, pushes, totalUnits, roi };
    }

    // Original processing logic (adapted from the original script)
    function processPicksData(mlbPicksData) {
        try {
            const processedPicks = mlbPicksData.map(p => {
                try {
                    if (!p.Pick || !p.Result || !p.Units || !p.Line || !p.Date) return null;
                    const pickText = String(p.Pick).trim();
                    const resultText = String(p.Result).trim().toUpperCase();
                    const units = parseFloat(p.Units);
                    const line = parseFloat(p.Line);
                    if (pickText === '' || resultText === '' || isNaN(units) || isNaN(line)) return null;
                    let risk = 0;
                    if (units < 0) {
                        risk = Math.abs(units);
                    }
                    else if (units > 0) {
                        if (line > 0) {
                            risk = (units / (line / 100));
                        }
                        else {
                            risk = (units * (Math.abs(line) / 100));
                        }
                    }
                    return { ...p, units, risk, parsedDate: new Date(p.Date) };
                } catch {
                    return null;
                }
            }).filter(p => p !== null).sort((a, b) => b.parsedDate - a.parsedDate);

            // Filter out cross-sport parlays (they go on the cross-sport parlays page)
            const singleSportPicks = processedPicks.filter(p => !isCrossSportParlay(p.Pick));
            allProcessedPicks = singleSportPicks;
            displayFilteredPicks(currentYearFilter);

        } catch (e) {
            console.error("A critical error occurred:", e);
            document.querySelector('.container').innerHTML = `<h1>NCAAF Records</h1><p>There was a problem loading the betting history. Please check the data file for errors. Details: ${e.message}</p>`;
        }
    }

    // CHART FUNCTION
    function createChart() {
        function parseNumber(txt){
            if(!txt) return 0;
            txt = txt.replace(/,/g,'').trim();
            var num = parseFloat(txt);
            if(isNaN(num)) return 0;
            return num;
        }

        function getChartData(){
            var table = document.querySelector('#picks-table-body');
            if(!table) return {labels:[], dates:[], cumulative:[], totalBets:0};
            
            var rows = Array.from(table.querySelectorAll('tr'));
            if(rows.length === 0) return {labels:[], dates:[], cumulative:[], totalBets:0};

            var points = rows.map(function(tr){
                var cells = tr.querySelectorAll('td');
                if(!cells.length) return null;

                var dateTxt = cells[0].textContent.trim();
                var unitsTxt = (cells[4] || {}).textContent || "0";
                var unitsVal = parseNumber(unitsTxt);
                
                var dateObj = new Date(dateTxt);
                
                return {
                    date: dateTxt,
                    dateObj: dateObj,
                    units: unitsVal
                };
            }).filter(Boolean);

            points.reverse();

            var labels = [];
            var dates = [];
            var cumulative = 0;
            var series = [];
            
            points.forEach(function(p){
                cumulative += p.units;
                
                var displayDate = p.date;
                if(p.dateObj && !isNaN(p.dateObj)) {
                    var month = p.dateObj.getMonth() + 1;
                    var day = p.dateObj.getDate();
                    displayDate = month + '/' + day;
                }
                
                labels.push(displayDate);
                dates.push(p.date);
                series.push(Number(cumulative.toFixed(2)));
            });

            return {
                labels: labels,
                dates: dates,
                cumulative: series,
                totalBets: points.length
            };
        }

        var ctx = document.getElementById('unitsChart');
        if(!ctx) return;
        
        var data = getChartData();
        
        if(data.labels.length === 0) {
            document.getElementById('chart-total-bets').textContent = '0';
            document.getElementById('chart-current-units').textContent = '+0.00';
            document.getElementById('chart-peak-units').textContent = '+0.00';
            return;
        }

        var currentUnits = data.cumulative[data.cumulative.length - 1] || 0;
        var peakUnits = Math.max(...data.cumulative);
        
        document.getElementById('chart-total-bets').textContent = data.totalBets;
        document.getElementById('chart-current-units').textContent = (currentUnits >= 0 ? '+' : '') + currentUnits.toFixed(2);
        document.getElementById('chart-current-units').style.color = currentUnits >= 0 ? '#39FF14' : '#FF3131';
        document.getElementById('chart-peak-units').textContent = (peakUnits >= 0 ? '+' : '') + peakUnits.toFixed(2);

        if(window.__nflUnitsChart) { 
            window.__nflUnitsChart.destroy(); 
        }

        window.__nflUnitsChart = new Chart(ctx.getContext('2d'), {
            type: 'line',
            data: {
                labels: data.labels,
                datasets: [{
                    label: 'Units',
                    data: data.cumulative,
                    borderColor: '#00e0ff',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    fill: false,
                    tension: 0.1,
                    pointRadius: 0,
                    pointHoverRadius: 4,
                    pointHoverBackgroundColor: '#00e0ff',
                    pointHoverBorderColor: '#ffffff',
                    pointHoverBorderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    intersect: false,
                    mode: 'index'
                },
                scales: {
                    x: {
                        ticks: { 
                            color: '#b9c7d6',
                            maxRotation: 0,
                            autoSkip: false,
                            font: {
                                family: 'Roboto',
                                size: 10
                            }
                        },
                        grid: { 
                            display: true,
                            color: 'rgba(255,255,255,0.1)'
                        },
                        border: {
                            color: 'rgba(0, 224, 255, 0.3)'
                        }
                    },
                    y: {
                        beginAtZero: false,
                        ticks: { 
                            color: '#b9c7d6',
                            font: {
                                family: 'Roboto',
                                size: 12
                            },
                            stepSize: 5,
                            callback: function(value) {
                                return (value >= 0 ? '+' : '') + value;
                            }
                        },
                        grid: { 
                            color: 'rgba(255,255,255,0.15)'
                        },
                        border: {
                            color: 'rgba(0, 224, 255, 0.3)'
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(12, 18, 32, 0.95)',
                        titleColor: '#00e0ff',
                        bodyColor: '#ffffff',
                        borderColor: '#00e0ff',
                        borderWidth: 1,
                        cornerRadius: 8,
                        titleFont: {
                            family: 'Orbitron',
                            size: 12,
                            weight: 'bold'
                        },
                        bodyFont: {
                            family: 'Roboto',
                            size: 11
                        },
                        callbacks: {
                            title: function(context) {
                                var index = context[0].dataIndex;
                                return data.dates[index] || context[0].label;
                            },
                            label: function(context) {
                                var value = context.parsed.y;
                                return 'Total Units: ' + (value >= 0 ? '+' : '') + value.toFixed(2);
                            }
                        }
                    }
                }
            }
        });
    }

    // Load data when page loads
    document.addEventListener('DOMContentLoaded', function () {
        // Load data from Google Sheets
        loadDataFromSheets();

        // Year filter button event listeners
        const yearFilterBtns = document.querySelectorAll('.year-filter-btn');
        yearFilterBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                yearFilterBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                const selectedYear = this.getAttribute('data-year');
                displayFilteredPicks(selectedYear);
            });
        });
    });

    // Optional: Refresh data every 5 minutes
    setInterval(loadDataFromSheets, 300000);

// Mobile dropdown menu functionality
document.addEventListener('DOMContentLoaded', function() {
    const dropdowns = document.querySelectorAll('.dropdown');
        dropdowns.forEach(dropdown => {
        const dropbtn = dropdown.querySelector('.dropbtn');
        const dropdownContent = dropdown.querySelector('.dropdown-content');

        if (dropbtn && dropdownContent) {
            // Handle button clicks to toggle dropdown
            dropbtn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();

                // Close all other dropdowns
                dropdowns.forEach(otherDropdown => {
                    if (otherDropdown !== dropdown) {
                        otherDropdown.classList.remove('active');
                    }
                });

                // Toggle current dropdown
                dropdown.classList.toggle('active');
            });


        }
    });

    // Close dropdowns when clicking outside
    document.addEventListener('click', function(e) {
        // Check if click is outside all dropdowns
        if (!e.target.closest('.dropdown')) {
            dropdowns.forEach(dropdown => {
                dropdown.classList.remove('active');
            });
        }
    });
});
    </script>

<!-- Clicky Analytics -->
<a title="Web Analytics" href="https://clicky.com/101485054"><img alt="Clicky" src="//static.getclicky.com/media/links/badge.gif" border="0" /></a>
<script async data-id="101485054" src="//static.getclicky.com/js"></script>
</body>
</html>
